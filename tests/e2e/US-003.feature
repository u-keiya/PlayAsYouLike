@US-003 @issue-22
Feature: 譜面描画と判定シナリオ
  連続プレイで同じ譜面を再挑戦したいライトゲーマーとして
  Canvas 上で譜面を視覚化しながらワンキー操作で判定を確認したい
  なぜならヒット／ミスの結果をすぐリザルト画面で振り返りたいからだ

  Background:
    Given メタデータ API が成功レスポンスを返す
    And セッション開始 API が固定譜面を返す

  Scenario: Canvas に描画されたノートを判定してリザルトへ遷移する
    When URL "https://www.youtube.com/watch?v=dQw4w9WgXcQ" を入力して Fetch を押す
    And Play ボタンを押す
    Then プレイ画面が表示される
    When プレイを開始する
    And 620ミリ秒待ってキー入力を送る
    And 620ミリ秒待ってキー入力を送る
    And リザルト画面が表示されるまで待つ
    Then リザルト画面でヒット数が "1" と表示される
    And リザルト画面でレイト数が "1" と表示される
    And リザルト画面でミス数が "1" と表示される
    And リザルト画面で合計スコアが "170" と表示される
