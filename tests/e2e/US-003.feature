# language: ja
@us-003
Feature: US-003 ランダム譜面生成とリプレイ同一譜面

  ライトゲーマーは、同じ曲でもプレイするたびに異なる譜面で遊べ、
  「リプレイ」時には直前の譜面で再挑戦できる。

  Scenario: 初回プレイではランダムな譜面が生成される
    Given ユーザが曲を選択し、初めて「Play」を押す
    When プレイ画面に遷移する
    Then 譜面がランダムに生成され、プレイが開始される

  Scenario: 連続リプレイでは同一の譜面が使用される
    Given プレイ終了後のリザルト画面にいる
    When ユーザが「Replay」を押す
    Then 直前と同一の譜面シードが適用され、同じ譜面で再度プレイが開始される

  Scenario: 別セッションでは新しい譜面が生成される
    Given リザルト画面を閉じ、トップページへ戻っている
    When ユーザが同じ曲のURLを再度入力し、「Play」を押す
    Then 前回とは異なるランダムシードが用いられ、新しい譜面でプレイが開始される